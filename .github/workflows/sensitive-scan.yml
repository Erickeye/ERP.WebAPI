name: Sensitive Word Check

on:
  # push:
  #   branches: ["**"]
  pull_request:
    branches: ["main,master "]

jobs:
  scan:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Scan for sensitive keywords
        run: |
          echo "Scanning for sensitive words..."
          
          # 敏感字
           SENSITIVE_WORDS=(

          )

          # 專案程式碼路徑
          TARGET_DIR="src"

          FOUND=0

          # 排除 bin/obj/.git 之類無意義的資料夾
          EXCLUDES="--exclude-dir=bin --exclude-dir=obj --exclude-dir=.git"

          for word in "${SENSITIVE_WORDS[@]}"; do
            echo "Searching: $word"

            if grep -Rni $EXCLUDES "$word" "$TARGET_DIR"; then
              echo "::error file=$TARGET_DIR::❌ Sensitive word found: $word"
              FOUND=1
            fi
          done

          if [ $FOUND -eq 1 ]; then
            echo "❌ Sensitive words detected. Blocking."
            exit 1
          else
            echo "✔ No sensitive words found."
          fi
